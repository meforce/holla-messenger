"use strict";(self.webpackChunkion_holla_messenger=self.webpackChunkion_holla_messenger||[]).push([[3806],{3806:(Le,B,_)=>{_.r(B),_.d(B,{MessagePageModule:()=>Ne});var z=_(8583),G=_(6378),D=_(4762),q=_(3679),$=_(4353),V=_.n($),W=_(663),w=_.n(W),K=_(6185),X=_(9517),j=_(4080),ee=_(9285),te=_(9959),O=_(5527),ie=_(1902);const ae=(0,_(8384).fo)("Network",{web:()=>_.e(5182).then(_.bind(_,5182)).then(n=>new n.NetworkWeb)});var I=_(2773),e=_(3018),v=_(4490),J=_(7635),oe=_(887),ne=_(393),re=_(4368),le=_(4333);let ce=(()=>{class n{constructor(t){this.localStorageService=t}cacheFeedDateWrite(t,i,s){t&&(this.localStorageService.removeItem(i+"_uid_"+s),this.localStorageService.setItem(i+"_uid_"+s,t))}cacheFeedDateRead(t,i){return this.localStorageService.getItem(t+"_uid_"+i)}setTimeCacheWritefeed(t,i,s){return this.localStorageService.getItem("setTime_"+i+"_uid_"+s)||this.localStorageService.setItem("setTime_"+i+"_uid_"+s,t),this.localStorageService.getItem("setTime_"+i+"_uid_"+s)}realNowSetTime(){var t=new Date;return t.toLocaleTimeString(),t.toLocaleString(),Math.round(t.getTime()/1e3)}realSetTimeNexty(t){var i=new Date;return i.setSeconds(i.getSeconds()+t),i.toLocaleTimeString(),i.toLocaleString(),Math.round(i.getTime()/1e3)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(J.n))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var de=_(4540);function ue(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"div",20),e.TgZ(1,"div",21),e._UZ(2,"ion-icon",22),e._UZ(3,"br"),e.TgZ(4,"p",23),e._uU(5),e.ALo(6,"translate"),e._UZ(7,"br"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"ion-button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().tryloginx()}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.qZA()}2&n&&(e.xp6(5),e.hij("\n",e.lcZ(6,3,"messenger.noconnetmobiles")," "),e.xp6(3),e.hij("\n",e.lcZ(9,5,"messenger.nomobileconnetss"),"\n"),e.xp6(3),e.hij("\n",e.lcZ(12,7,"messenger.countimes"),"\n"))}function he(n,p){1&n&&(e.TgZ(0,"div",20),e.TgZ(1,"div",21),e._UZ(2,"ion-icon",25),e._UZ(3,"br"),e.TgZ(4,"p"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"ion-progress-bar",26),e.qZA(),e.qZA()),2&n&&(e.xp6(5),e.hij("\n",e.lcZ(6,1,"messenger.sycingdata"),"\n"))}function me(n,p){1&n&&(e.TgZ(0,"div",20),e.TgZ(1,"div",21),e._UZ(2,"ion-icon",27),e._UZ(3,"br"),e.TgZ(4,"p"),e._uU(5),e.ALo(6,"translate"),e._UZ(7,"br"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"ion-progress-bar",26),e.qZA(),e.qZA()),2&n&&(e.xp6(5),e.hij("\n",e.lcZ(6,2,"messenger.offlinemode"),""),e.xp6(3),e.hij("\n",e.lcZ(9,4,"messenger.reconntetted"),"\n"))}function ge(n,p){if(1&n&&e._UZ(0,"img",32),2&n){const t=e.oxw(2);e.MGl("id","userphotos",t.uuuserid,"")}}function pe(n,p){if(1&n&&e._UZ(0,"img",33),2&n){const t=e.oxw(2);e.MGl("id","userphotos",t.uuuserid,""),e.s9C("src",t.userphotos,e.LSH)}}function fe(n,p){if(1&n&&(e.TgZ(0,"ion-avatar",28),e.YNc(1,ge,1,1,"img",29),e.YNc(2,pe,1,2,"img",30),e._UZ(3,"ion-icon",31),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","none"==t.userphotos),e.xp6(1),e.Q6J("ngIf","none"!=t.userphotos),e.xp6(1),e.Q6J("color",t.serveractivestats?"success":"danger")}}function _e(n,p){1&n&&(e.TgZ(0,"ion-title"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"login_app_name")))}function ve(n,p){1&n&&(e.TgZ(0,"ion-title"),e._UZ(1,"ion-icon",34),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"messenger.serverconnecting"),""))}function Se(n,p){1&n&&(e.TgZ(0,"ion-title"),e._UZ(1,"ion-icon",34),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"messenger.serverconnecterror"),""))}function ye(n,p){1&n&&e._UZ(0,"ion-progress-bar",35)}function De(n,p){if(1&n&&e._UZ(0,"img",32),2&n){const t=e.oxw().$implicit;e.MGl("id","messagephoto",t.userid,"")}}function xe(n,p){if(1&n&&e._UZ(0,"img",33),2&n){const t=e.oxw().$implicit;e.MGl("id","messagephotos",t.userid,""),e.s9C("src",t.photo,e.LSH)}}function Te(n,p){if(1&n&&(e.TgZ(0,"div",47),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.MGl("id","messagecontes",t.userid,""),e.xp6(1),e.Oqu(t.message)}}function Ie(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"ion-item-sliding"),e.TgZ(1,"ion-item",36),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().messageDetail(a)}),e.TgZ(2,"ion-avatar",37),e.YNc(3,De,1,1,"img",29),e.YNc(4,xe,1,2,"img",30),e.TgZ(5,"div",38),e._UZ(6,"div",39),e.qZA(),e.qZA(),e.TgZ(7,"ion-label"),e.TgZ(8,"h2",40),e._uU(9),e.qZA(),e.TgZ(10,"div",41),e.YNc(11,Te,2,2,"div",42),e.qZA(),e.qZA(),e._UZ(12,"div",43),e.qZA(),e.TgZ(13,"ion-item-options",44),e.TgZ(14,"ion-item-option",45),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().deletechats(a)}),e._UZ(15,"ion-icon",46),e.TgZ(16,"ion-label"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=p.$implicit,i=e.oxw();e.Udp("display",t&&t.message?"":"none"),e.xp6(1),e.Tol(t.userid==i.activeitems?"sactived":"nosapassif"),e.xp6(2),e.Q6J("ngIf","none"==t.photo),e.xp6(1),e.Q6J("ngIf","none"!=t.photo),e.xp6(2),e.MGl("id","xisonly",t.userid,""),e.xp6(2),e.MGl("id","messagename",t.userid,""),e.xp6(1),e.Oqu(t.fullName),e.xp6(2),e.Q6J("ngIf",t.message),e.xp6(1),e.Udp("display",t.messageLook?"block":"none"),e.MGl("id","messageLooks",t.userid,""),e.xp6(5),e.hij("\n",e.lcZ(18,14,"general.delete"),"\n")}}function be(n,p){if(1&n&&e._UZ(0,"img",32),2&n){const t=e.oxw(2).$implicit;e.MGl("id","messagephoto2",t.userid,"")}}function Me(n,p){if(1&n&&e._UZ(0,"img",33),2&n){const t=e.oxw(2).$implicit;e.MGl("id","messagephotos2",t.userid,""),e.s9C("src",t.photo,e.LSH)}}function we(n,p){if(1&n&&(e.TgZ(0,"div",47),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.MGl("id","messagedesc2",t.userid,""),e.xp6(1),e.Oqu(t.desc_status)}}function Ce(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"ion-item",50),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).messageDetail(s)}),e.TgZ(1,"ion-avatar",37),e.YNc(2,be,1,1,"img",29),e.YNc(3,Me,1,2,"img",30),e.TgZ(4,"div",38),e._UZ(5,"div",39),e.qZA(),e.qZA(),e.TgZ(6,"ion-label"),e.TgZ(7,"h2",40),e._uU(8),e.qZA(),e.TgZ(9,"div",41),e.YNc(10,we,2,2,"div",42),e.qZA(),e.qZA(),e._UZ(11,"div",51),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Tol(t.userid==i.activeitems?"sactived":"nosapassif"),e.Udp("display",t?"":"none"),e.xp6(2),e.Q6J("ngIf","none"==t.photo),e.xp6(1),e.Q6J("ngIf","none"!=t.photo),e.xp6(2),e.MGl("id","isonly",t.userid,""),e.xp6(2),e.MGl("id","messagename2",t.userid,""),e.xp6(1),e.Oqu(t.fullName),e.xp6(2),e.Q6J("ngIf",t.desc_status)}}function ke(n,p){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Ce,12,10,"ion-item",49),e.qZA()),2&n){const t=p.$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.fullName.toUpperCase().charAt(0)==i)}}function Ae(n,p){if(1&n&&(e.TgZ(0,"ion-item-group"),e.TgZ(1,"ion-item-divider",48),e.TgZ(2,"ion-label"),e._uU(3),e.qZA(),e.qZA(),e.YNc(4,ke,2,1,"div",18),e.qZA()),2&n){const t=p.$implicit,i=e.oxw();e.xp6(3),e.Oqu(t),e.xp6(1),e.Q6J("ngForOf",i.peopleData)}}function Ze(n,p){1&n&&e._UZ(0,"div",52)}const L="SESSION",Q="MESSAGE_DATA_",S="PEOPLE_DATA_",y="MESSAGE_DETAIL_DATA_",k="MESSAGE_DETAIL_DATA_SENDLOOP",E=I.tP.Documents,Z="holla-messenger",U="holla-audio",F="holla-photo",Pe=[{path:"",component:(()=>{class n{constructor(t,i,s,a,o,l,u,h,f,m,d,r,c,g,T,M,x,b){this.config=t,this.localStorageService=i,this.generalFunctions=s,this.modalCtrl=a,this.routerOutlet=o,this.navCtrl=l,this.router=u,this.route=h,this.zone=f,this.cdref=m,this.platform=d,this.dataConfig=r,this.backgroundMode=c,this.vibration=g,this.AppCacheData=T,this.alertController=M,this.actionSheetController=x,this.menu=b,this.searchMessageList=new q.NI(""),this.segmentView="chats",this.cacheDataMessageDetail=[],this.messageData=[],this.peopleData=[],this.serverstatus="connecting",this.activeitems=0,this.sendsycn=!1,this.folderContent=[],this.currentFolder="",this.copyFile=null,this.isOnline="offline",this.chatDizayn={name:"",image:"",visebled:!1},this.chatDizaynColor={name:"",image:"",visebled:!1},this.serveractivestats=!1,this.retyconnets=!0,this.qrstepone=!1}realSetTimeNextyx(t){var i=new Date;return i.setMinutes(i.getMinutes()+t),i.toLocaleTimeString(),i.toLocaleString(),Math.round(i.getTime()/1e3)}webRtcConnet(){return(0,D.mG)(this,void 0,void 0,function*(){const t=yield ae.getStatus();if(console.log("Network status:",t),!this.connection&&t.connected){if(this.connection=new(V()),this.connection.enableLogs=!1,this.connection.enableFileSharing=!0,this.connection.socketURL=this.socketurl,this.connection.session={data:!0},this.connection.autoSaveToDisk=!1,this.userData.photo)var i=this.userData.photo;else i="none";if("pwa"==this.userData.logintype){var s=this.userData.logintype+"+";this.ltypeis="pwa"}else s="",this.ltypeis="mobile";this.connection.extra={userid:this.userData.userid,fullName:this.userData.name,password:this.userData.password,logintype:this.userData.logintype,photo:"none",desc_status:this.userData.desc_status,last_time:this.AppCacheData.realNowSetTime()},this.connection.onReConnecting=o=>{console.info("ReConnecting with",o.userid,"...")},this.connection.onUserIdAlreadyTaken=(o,l)=>{console.log("Userid already taken.",o,"Your new userid:",l)},this.connection.onstream=o=>{},this.onMessage(),this.connection.onopen=o=>{},this.connection.onUserStatusChanged=o=>{o.userid=o.userid.replace("pwa+","");var l=o.userid.replace("pwa+",""),u=o.status;let h=document.getElementById("isonly"+l);h&&(h.style.display="offline"==u?"none":"block");let f=document.getElementById("xisonly"+l);f&&(f.style.display="offline"==u?"none":"block");var m=this.localStorageService.getItem(S+this.userData.userid),d=m.findIndex(c=>c.userid==l);if(m[d]){m[d].isOnly=u;var r=this.connection.getExtraData(l);if(l==r.userid){if(r.fullName!=m[d].fullName){let c=document.getElementById("messagename"+l);c&&(c.innerText=r.fullName);let g=document.getElementById("messagename2"+l);g&&(g.innerText=r.fullName);let T=document.getElementById("mesdatiname"+l);T&&(T.innerText=r.fullName),m[d].fullName=r.fullName}if(r.desc_status!=m[d].desc_status){let c=document.getElementById("messagedesc"+l);c&&(c.innerText=r.desc_status);let g=document.getElementById("messagedesc2"+l);g&&(g.innerText=r.desc_status),m[d].desc_status=r.desc_status}if(r.photo!=m[d].photo){if("none"!=r.photo&&r.photo){let c=document.getElementById("messagephoto"+l);c&&(c.src=r.photo);let g=document.getElementById("messagephotos"+l);g&&(g.src=r.photo);let T=document.getElementById("messagephoto2"+l);T&&(T.src=r.photo);let M=document.getElementById("messagephotos2"+l);M&&(M.src=r.photo);let x=document.getElementById("mesdatiphoto"+l);x&&(x.src=r.photo);let b=document.getElementById("mesdatiphotoo"+l);b&&(b.src=r.photo)}m[d].photo=r.photo}r.last_time!=m[d].last_time&&(m[d].last_time=r.last_time),this.localStorageService.setItem(S+this.userData.userid,m)}}"pwa"==this.userData.logintype&&l==this.userData.userid&&("offline"==u?this.pwamobilstatus||(this.pwamobilstatus=!0,this.localStorageService.setItem("pwamobilestatus"+this.userData.userid,!0),console.log("Mobil Cihaz\u0131n\u0131z\u0131n Aktif Olmas\u0131 Gerekir"),this.modal&&(this.modal.dismiss({data:!0}),this.modal=null),this.modal2&&(this.modal2.dismiss({data:!0}),this.modal2=null),this.modal3&&(this.modal3.dismiss({data:!0}),this.modal3=null)):this.pwamobilstatus&&(this.pwamobilstatus=!1,this.localStorageService.setItem("pwamobilestatus"+this.userData.userid,!1),console.log("Mobil Cihaz\u0131n\u0131z Aktif")))},this.connection.onleave=o=>{this.connection.extra.status="offline",this.connection.updateExtraData()},this.connection.streamended=o=>{},this.connection.onclose=o=>{this.connection.extra.status="offline",this.connection.updateExtraData()},this.connection.password=w()(this.serverpassword);let a=w()(this.serverid);this.connection.userid=s+this.userData.userid,this.connection.openOrJoin(a,(o,l,u,h)=>{h&&(console.log(h),this.serverstatus="connecterror"),!0===o&&(this.retyconnets=!0,this.serverstatus="connect",this.isOnline="online",this.connection.extra.status="online",this.serveractivestats=!0,setTimeout(()=>{this.connection.extra.photo=i,this.connection.extra.status="online",this.connection.updateExtraData(),this.sleep()},1900),"enabled"==this.localStorageService.getItem("loginsycndisable"+this.userData.userid)&&!this.sendsycn&&"pwa"==this.ltypeis&&setTimeout(()=>{console.log("\u0130stek G\xf6nderildi"),this.sycnDataSender()},1e3))})}else console.log("a\u011f hatas\u0131")})}sleepPromise(t){return new Promise(i=>setTimeout(i,t))}sleep(){return(0,D.mG)(this,void 0,void 0,function*(){for(;;)yield this.sleepPromise(2e3),this.qrscan(),this.online()})}qrscan(){if(!this.qrstepone){var t=this.localStorageService.getItem("qrscandata");if(t){this.qrstepone=!0;var i=t.split(",");console.log(i[0]),console.log(i[1]),console.log(i[2]),"pwa_login_control"==i[2]&&i[1]&&this.opensessionchecks({userid:i[0],token:i[1],g_type:"pwa_login_session",inuserdata:this.userData,devices:""})}}}tryloginx(){this.pwamobilstatus=!1,this.sendsycn||(this.sendsycn=!0,this.dataInit())}trylogin(){this.connection.closeSocket(),this.connection=null,this.generalFunctions.navCtrlNR("/")}closesSeisons(){setTimeout(()=>{this.connection.closeSocket(),setTimeout(()=>{this.connection=null},200)},1e3),this.pwamobilstatus=!0}time(){var t=new Date,s=(t.getSeconds(),t.getMinutes());return("0"+t.getHours()).substr(-2)+":"+("0"+s).substr(-2)}onMessage(){this.connection.onFileStart=i=>{var s=i.userid,a=i.remoteUserId;if(s==this.userData.userid||a==this.userData.userid){var o;s==this.userData.userid&&(o="me"),a==this.userData.userid&&(o="user");var r,l=this.GenerateSerialNumber("0000-0000000-000-000000-000"),u="online",h=this.connection.getExtraData(s),f=new Date,m=this.generalFunctions.xtranslate("messenger.filesend"),d={id:l,message:m,date:f,type:o,name:h.fullName,avatar:"",clock:this.time(),reciveruserid:a,senderid:s,ctype:u,g_type:"files",files:i,filetype:i.type,filetypemin:i.type.split("/")[0],filestatus:"start",fileuuid:i.uuid,fileurl:"",progressmax:i.maxChunks};"me"==o&&(r=a),"user"==o&&(r=s),this.localStorageService.setItem(k+this.userData.userid+r,d),this.localStorageService.getItem(y+r)||this.localStorageService.setItem(y+r,[]),this.cacheDataMessageDetail=this.localStorageService.getItem(y+r),l=this.GenerateSerialNumber("0000-0000000-000-000000-000"),this.cacheDataMessageDetail.push({id:l,message:this.generalFunctions.xtranslate("messenger.filesend"),date:f,type:o,name:h.fullName,avatar:"",clock:this.time(),reciveruserid:a,senderid:s,ctype:u,g_type:"files",files:i,filetype:i.type,filetypemin:i.type.split("/")[0],filestatus:"start",fileuuid:i.uuid,fileurl:"",progressmax:i.maxChunks}),this.localStorageService.setItem(y+r,this.cacheDataMessageDetail);var c=this.localStorageService.getItem(S+this.userData.userid),g=c.findIndex(b=>b.userid==r);if(c[g])c[g].date=f,c[g].message=m,"user"==o&&(c[g].messageLook=!0);else{var T={fullName:h.fullName,photo:h.photo,userid:h.userid,desc_status:h.desc_status,isOnly:h.status,date:f,message:m,messageLook:!0};c.push(T),this.messageData.push(T)}let M=document.getElementById("messagecontes"+r);M&&(M.innerText=m);let x=document.getElementById("messageLooks"+r);x&&"user"==o&&(x.style.display="block"),this.localStorageService.setItem(S+this.userData.userid,c)}};var t=0;this.connection.onFileProgress=i=>{var o,s=i.userid,a=i.remoteUserId;(s==this.userData.userid||a==this.userData.userid)&&++t>50&&(s==this.userData.userid&&(o="me"),a==this.userData.userid&&(o="user"),"me"==o&&(s=a),this.localStorageService.setItem(k+this.userData.userid+s,{uuid:i.uuid,chunk:i,g_type:"filepross",reciveruserid:i.remoteUserId,senderid:i.userid}))},this.connection.onFileEnd=i=>{t=0,setTimeout(()=>{var s=i.userid,a=i.remoteUserId;if(s==this.userData.userid||a==this.userData.userid){var o,l;s==this.userData.userid&&(o="me"),a==this.userData.userid&&(o="user"),"me"==o&&(l=a),"user"==o&&(l=s);var u=i.uuid,h=this.localStorageService.getItem(y+l),f=h.findIndex(g=>g.fileuuid==u);h[f]&&(h[f].filestatus="end",h[f].fileurl=i.url,this.localStorageService.setItem(y+l,h));var m=this.GenerateSerialNumber("0000-0000000-000-000000-000"),r=this.connection.getExtraData(s),c={id:m,message:this.generalFunctions.xtranslate("messenger.filesend"),date:new Date,type:"user",name:r.fullName,avatar:"",clock:this.time(),reciveruserid:a,senderid:s,ctype:"online",g_type:"filesend",files:i,filestatus:"end",fileuuid:i.uuid,fileurl:i.url};this.localStorageService.setItem(k+this.userData.userid+l,c)}},50)},this.connection.onmessage=i=>{if(this.pwamobilesendsycn(i),i.data.reciveruserid==this.userData.userid&&("writer"==i.data.g_type&&this.localStorageService.setItem(k+this.userData.userid+i.data.senderid,i),("audio"==i.data.g_type||"photo"==i.data.g_type)&&this.allmedias(i),"message"==i.data.g_type)){this.localStorageService.setItem(k+this.userData.userid+i.data.senderid,i),i.userid=i.userid.replace("pwa+","");var s=w()(this.user_encryption_token+i.userid+this.userData.userid),a=this.encryptionLi(s,i.data.message,"decrypting");this.localStorageService.getItem(y+i.data.senderid)||this.localStorageService.setItem(y+i.data.senderid,[]),this.cacheDataMessageDetail=this.localStorageService.getItem(y+i.data.senderid);var o=this.GenerateSerialNumber("0000-0000000-000-000000-000"),u=new Date,d=u.getDate()+"."+u.getMonth()+"."+u.getFullYear(),r=this.localStorageService.getItem(y+i.data.senderid),c=r.findIndex(P=>P.newdata==d);this.cacheDataMessageDetail.push({id:o,message:a,date:i.data.date,type:"user",name:i.extra.fullName,avatar:"",clock:i.data.clock,reciveruserid:i.data.reciveruserid,senderid:i.data.senderid,ctype:i.data.ctype,g_type:i.data.g_type,newdata:r[c]?"":d}),this.localStorageService.setItem(y+i.data.senderid,this.cacheDataMessageDetail);var g=this.localStorageService.getItem(S+this.userData.userid),T=this.messageData,x=(new Date).getTime(),b=(c=g.findIndex(P=>P.userid==i.data.senderid),T.findIndex(P=>P.userid==i.data.senderid));if(g[c]?(g[c].date=i.data.date,g[c].message=a,g[c].messageLook=!0,g[c].timestamp=x):g.unshift({fullName:i.extra.fullName,photo:i.extra.photo,userid:i.extra.userid,desc_status:i.extra.desc_status,isOnly:i.extra.status,date:i.data.date,timestamp:x,message:a,messageLook:!0}),g[c]&&T[b]){T[b].date=i.data.date,T[b].message=a,T[b].messageLook=!0,T[b].timestamp=x;let P="date";this.messageData.sort((Y,R)=>(R[P]||"").toString().localeCompare((Y[P]||"").toString()))}else this.messageData.unshift({fullName:i.extra.fullName,photo:i.extra.photo,userid:i.extra.userid,desc_status:i.extra.desc_status,isOnly:i.extra.status,date:i.data.date,timestamp:x,message:a,messageLook:!0});let A=document.getElementById("messagecontes"+i.data.senderid);A&&(A.innerText=a);let C=document.getElementById("messageLooks"+i.data.senderid);C&&(C.style.display="block"),this.localStorageService.setItem(S+this.userData.userid,g)}}}allmedias(t){return(0,D.mG)(this,void 0,void 0,function*(){if("audio"==t.data.g_type||"photo"==t.data.g_type){t.userid=t.userid.replace("pwa+","");var i=t.data.message;this.localStorageService.getItem(y+t.data.senderid)||this.localStorageService.setItem(y+t.data.senderid,[]),this.cacheDataMessageDetail=this.localStorageService.getItem(y+t.data.senderid);var a,s=this.GenerateSerialNumber("0000-0000000-000-000000-000"),o=new Date,f=o.getDate()+"."+o.getMonth()+"."+o.getFullYear(),m=this.localStorageService.getItem(y+t.data.senderid),d=m.findIndex(C=>C.newdata==f);a=m[d]?"":f;var r=w()(this.user_encryption_token+t.userid+this.userData.userid);if("audio"==t.data.g_type){var c="audio_"+this.GenerateSerialNumber("0000-0000000-000-000000-000-0000000")+".dataV3",g=this.encryptionLi(r,t.data.audio,"decrypting");yield this.writeSecretFileAudio(c,g);var T=c;t.data.audio=c}if("photo"==t.data.g_type){c="photo_"+this.GenerateSerialNumber("0000-0000000-000-000000-000-0000000")+".dataV3",g=this.encryptionLi(r,t.data.photo,"decrypting"),yield this.writeSecretFilePhoto(c,g);var M=c;t.data.photo=c}this.cacheDataMessageDetail.push({id:s,message:i,date:t.data.date,type:"user",name:t.extra.fullName,avatar:"",clock:t.data.clock,reciveruserid:t.data.reciveruserid,senderid:t.data.senderid,ctype:t.data.ctype,g_type:t.data.g_type,audio:T,audiomintype:t.data.audiomintype,audioduration:t.data.audioduration,photo:M,photoaudiotype:t.data.photoaudiotype,newdata:a,tumbimages:t.data.tumbimages}),this.localStorageService.setItem(y+t.data.senderid,this.cacheDataMessageDetail);var x=this.localStorageService.getItem(S+this.userData.userid);if(d=x.findIndex(C=>C.userid==t.data.senderid),x[d])x[d].date=t.data.date,x[d].message=i,x[d].messageLook=!0;else{var b={fullName:t.extra.fullName,photo:t.extra.photo,userid:t.extra.userid,desc_status:t.extra.desc_status,isOnly:t.extra.status,date:t.data.date,message:i,messageLook:!0};x.push(b),this.messageData.push(b)}let N=document.getElementById("messagecontes"+t.data.senderid);N&&(N.innerText=i);let A=document.getElementById("messageLooks"+t.data.senderid);A&&(A.style.display="block"),this.localStorageService.setItem(S+this.userData.userid,x),this.localStorageService.setItem(k+this.userData.userid+t.data.senderid,t)}})}pwamobilesendsycn(t){return(0,D.mG)(this,void 0,void 0,function*(){if("normal_text_send"==t.data.g_type&&t.data.token==this.userData.userid){var i=w()("normal_text_send:"+this.userData.userid);t.data.indata.message=this.encryptionLi(i,t.data.indata.message,"decrypting"),this.localStorageService.setItem(k+this.userData.userid+t.data.indata.reciveruserid,t),this.localStorageService.getItem(y+t.data.indata.reciveruserid)||this.localStorageService.setItem(y+t.data.indata.reciveruserid,[]),this.cacheDataMessageDetail=this.localStorageService.getItem(y+t.data.indata.reciveruserid),this.cacheDataMessageDetail.push(t.data.indata),this.localStorageService.setItem(y+t.data.indata.reciveruserid,this.cacheDataMessageDetail);var a=(s=this.localStorageService.getItem(S+this.userData.userid)).findIndex(C=>C.userid==t.data.indata.reciveruserid);s[a]&&(s[a].date=t.data.indata.date,s[a].message=t.data.indata.message,s[a].messageLook=!1);let A=document.getElementById("messagecontes"+t.data.indata.reciveruserid);A&&(A.innerText=t.data.indata.message),this.localStorageService.setItem(S+this.userData.userid,s)}if("all_media_send"==t.data.g_type&&t.data.token==this.userData.userid){var s;i=w()("all_media_send:"+this.userData.userid),t.data.indata.tumbimages=this.encryptionLi(i,t.data.indata.tumbimages,"decrypting"),this.localStorageService.setItem(k+this.userData.userid+t.data.indata.reciveruserid,t),this.localStorageService.getItem(y+t.data.indata.reciveruserid)||this.localStorageService.setItem(y+t.data.indata.reciveruserid,[]),this.cacheDataMessageDetail=this.localStorageService.getItem(y+t.data.indata.reciveruserid),this.cacheDataMessageDetail.push(t.data.indata),this.localStorageService.setItem(y+t.data.indata.reciveruserid,this.cacheDataMessageDetail),a=(s=this.localStorageService.getItem(S+this.userData.userid)).findIndex(R=>R.userid==t.data.indata.reciveruserid),s[a]&&(s[a].date=t.data.indata.date,s[a].message=t.data.indata.message,s[a].messageLook=!1);let Y=document.getElementById("messagecontes"+t.data.indata.reciveruserid);Y&&(Y.innerText=t.data.indata.message),this.localStorageService.setItem(S+this.userData.userid,s)}if("user_settings_update"==t.data.g_type&&t.data.token==this.userData.userid&&(t.data.indata[0].logintype=this.userData.logintype,this.localStorageService.setItem(L,t.data.indata),this.userData=this.localStorageService.getItem(L)[0],this.userphotos=this.userData.photo,this.connection.extra.fullName=this.userData.name,this.connection.extra.desc_status=this.userData.desc_status,this.connection.extra.photo=this.userData.photo,this.connection.updateExtraData(),this.chatDizayn=this.userData.chatDizayn,this.chatDizaynColor=this.userData.chatDizaynColor),"open_message_look"==t.data.g_type&&t.data.token==this.userData.userid){let A=document.getElementById("messageLooks"+t.data.indata.userid);A&&(A.style.display="none")}if("send_media"==t.data.g_type&&t.data.token==this.userData.userid){var l=(o=t.data.indata).vdata,u=(i=w()("get_media_crpto:"+this.userData.userid),this.encryptionLi(i,l,"decrypting"));"get_photo"==o.type&&(yield this.writeSecretFilePhoto(o.name,u)),"get_audio"==o.type&&(yield this.writeSecretFileAudio(o.name,u)),this.localStorageService.setItem(k+this.userData.userid+o.reciveruserid,t)}if("get_media"==t.data.g_type&&t.data.token==this.userData.userid){let C;"get_photo"==(o=t.data.indata).type&&(C=yield this.readSecretFilePhotoPwa(o.name)),"get_audio"==o.type&&(C=yield this.readSecretFileAudioPwa(o.name)),i=w()("get_media_crpto:"+this.userData.userid);var h=this.encryptionLi(i,C,"encrypting");if("pwa"==this.userData.logintype)var f="pwa";else f="mobile";this.connection.send({token:this.userData.userid,g_type:"send_media",local:f,indata:{name:o.name,type:o.type,vdata:h,reciveruserid:o.reciveruserid}})}if("addpeople"==t.data.g_type&&t.data.token==this.userData.userid){var o=t.data.indata,r=this.localStorageService.getItem(S+this.userData.userid);r.length?(a=r.findIndex(P=>P.userid==o.userid),r[a]||(r.push(o),this.localStorageService.setItem(S+this.userData.userid,r),this.forceReloadData("people"))):(r.push(o),this.localStorageService.setItem(S+this.userData.userid,r),this.forceReloadData("people"))}if("pwa_login_control_sycn"==t.data.g_type&&t.data.reuserid==this.userData.userid){console.log("istek al\u0131nd\u0131 haz\u0131rlan\u0131yor");var c=this.userData.userid,g=this.userData.password,T=(i=w()(this.pwamobile_encryption_token),g),M=this.encryptionLi(i,c,"encrypting"),x=this.encryptionLi(i,T+M,"encrypting");t.data.token==x&&setTimeout(()=>{this.sycnGetData(t)},100)}if("pwa_login_session"==t.data.g_type&&t.data.reuserid==this.userData.userid&&(console.log("veriler haz\u0131rlan\u0131yor"),c=this.userData.userid,g=this.userData.password,i=w()(this.pwamobile_encryption_token),T=g,M=this.encryptionLi(i,c,"encrypting"),x=this.encryptionLi(i,T+M,"encrypting"),t.data.token==x&&"pwa_login_session"==t.data.g_type)){var N=t.data.allmessage;this.localStorageService.setItem(S+(c=t.data.inuserdata.userid),t.data.inpeopledata);for(let H of N)this.localStorageService.setItem(y+H.userid,H.data);t.data.inuserdata.logintype="pwa",this.localStorageService.setItem(L,[t.data.inuserdata]),this.sendsycn=!0,this.dataInit()}})}sycnDataSender(){var t=this.userData.userid,i=this.userData.password,s=w()(this.pwamobile_encryption_token),a=i,o=this.encryptionLi(s,t,"encrypting"),l=this.encryptionLi(s,a+o,"encrypting");this.connection.send({reuserid:t,userid:o,passcrpyt:a,token:l,g_type:"pwa_login_control_sycn"})}sycnGetData(t){return(0,D.mG)(this,void 0,void 0,function*(){console.log("Dosyalar Haz\u0131rlan\u0131yor");var i=[];for(let r of this.localStorageService.getItem(S+this.userData.userid)){var s=this.localStorageService.getItem(y+r.userid);s&&i.push({userid:r.userid,data:s})}var o=this.userData.userid,l=this.userData.password,u=w()(this.pwamobile_encryption_token),h=l,f=this.encryptionLi(u,o,"encrypting"),d={reuserid:o,userid:f,passcrpyt:h,token:this.encryptionLi(u,h+f,"encrypting"),g_type:"pwa_login_session",inuserdata:this.localStorageService.getItem(L)[0],inpeopledata:this.localStorageService.getItem(S+this.userData.userid),allmessage:i};yield setTimeout(()=>{console.log("Dosyalar Haz\u0131rland\u0131 G\xf6nderildi"),this.connection.send(d)},250)})}opensessionchecks(t){return(0,D.mG)(this,void 0,void 0,function*(){var s=O.LT,a=O.MD,o=this.routerOutlet.nativeEl,l=yield this.modalCtrl.create({component:j.MH,componentProps:{data:t,connection:this.connection},mode:"ios",cssClass:"modal-show-black-drop session-modal-show-black-drop nomusiccontrols",swipeToClose:!0,showBackdrop:!0,backdropDismiss:!0,enterAnimation:s,leaveAnimation:a,presentingElement:o});l.onDidDismiss().then(u=>{this.qrstepone=!1,this.localStorageService.removeItem("qrscandata"),l=null}),yield l.present()})}closeSocket(){this.connection&&(this.connection.extra.status="offline",this.connection.updateExtraData(),setTimeout(()=>{this.connection.disconnectWith(this.connection.userid),setTimeout(()=>{this.connection.closeSocket(),this.connection=""},200)},100))}offline(){this.connection.extra.status="offline",this.connection.updateExtraData()}online(){var t;this.connection||(this.webRtcConnet(),this.timeObjectCacLOG=this.realSetTimeNextyx(4)),this.connection&&(this.serveractivestats=this.connection.isOnline,!0===this.connection.isOnline?(t="online",this.isOnline="online"):(t="offline",this.isOnline="offline",this.closeSocket(),this.modal&&(this.modal.dismiss({data:!0}),this.modal=null),this.modal2&&(this.modal2.dismiss({data:!0}),this.modal2=null),this.modal3&&(this.modal3.dismiss({data:!0}),this.modal3=null)),this.connection.extra.last_time=this.AppCacheData.realNowSetTime(),this.connection.extra.status=t,this.connection.updateExtraData())}appClosedEvenet(){this.connection.extra.status="offline",this.connection.updateExtraData(),setTimeout(()=>{},100)}isOnly(){}openSettings(){return(0,D.mG)(this,void 0,void 0,function*(){var t,i,s,a;if(this.platform.is("mobile")?(t="modal-show-black-drop max-modal-show-black-drop nomusiccontrols",i=O.LT,s=O.MD,a=this.routerOutlet.nativeEl):(t="pcandwebdesig nomusiccontrols",i="",s="",a=";"),this.modal2&&(this.modal2.dismiss({data:!0}),this.modal2=null),!this.modal3)return this.modal3=yield this.modalCtrl.create({component:ie.NF,componentProps:{connection:this.connection},mode:"ios",cssClass:t,swipeToClose:!0,showBackdrop:!0,backdropDismiss:!0,enterAnimation:i,leaveAnimation:s,presentingElement:a}),this.modal3.onDidDismiss().then(o=>{this.modal3=null,this.userData=this.localStorageService.getItem(L)[0],this.chatDizayn=this.userData.chatDizayn,this.chatDizaynColor=this.userData.chatDizaynColor}),yield this.modal3.present();this.modal3.dismiss({data:!0}),this.modal3=null})}creategrops(){return(0,D.mG)(this,void 0,void 0,function*(){var t,i,s,a;if(this.platform.is("mobile")?(t="modal-show-black-drop max-modal-show-black-drop nomusiccontrols",i=O.LT,s=O.MD,a=this.routerOutlet.nativeEl):(t="pcandwebdesig nomusiccontrols",i="",s="",a=";"),this.modal3&&(this.modal3.dismiss({data:!0}),this.modal3=null),this.modal2&&(this.modal2.dismiss({data:!0}),this.modal2=null),this.modal&&(this.modal.dismiss({data:!0}),this.modal=null),!this.modal4)return this.modal4=yield this.modalCtrl.create({component:X.ns,componentProps:{connection:this.connection},mode:"ios",cssClass:t,swipeToClose:!0,showBackdrop:!0,backdropDismiss:!0,enterAnimation:i,leaveAnimation:s,presentingElement:a}),this.modal4.onDidDismiss().then(o=>{this.modal4=null,"people"==this.segmentView&&this.forceReloadData("people")}),yield this.modal4.present();this.modal4.dismiss({data:!0}),this.modal4=null})}openFinds(){return(0,D.mG)(this,void 0,void 0,function*(){var t,i,s,a;if(this.platform.is("mobile")?(t="modal-show-black-drop max-modal-show-black-drop nomusiccontrols",i=O.LT,s=O.MD,a=this.routerOutlet.nativeEl):(t="pcandwebdesig nomusiccontrols",i="",s="",a=";"),this.modal3&&(this.modal3.dismiss({data:!0}),this.modal3=null),!this.modal2)return this.modal2=yield this.modalCtrl.create({component:K.EL,componentProps:{connection:this.connection},mode:"ios",cssClass:t,swipeToClose:!0,showBackdrop:!0,backdropDismiss:!0,enterAnimation:i,leaveAnimation:s,presentingElement:a}),this.modal2.onDidDismiss().then(o=>{this.modal2=null,"people"==this.segmentView&&this.forceReloadData("people")}),yield this.modal2.present();this.modal2.dismiss({data:!0}),this.modal2=null})}messageDetail(t){return(0,D.mG)(this,void 0,void 0,function*(){if(this.activeitems!=t.userid){var i=this.localStorageService.getItem(S+this.userData.userid),s=i.findIndex(d=>d.userid==t.userid);let f=document.getElementById("isonly"+t.userid);f&&(i[s].isOnly="block"==f.style.display?"online":"offline");let m=document.getElementById("xisonly"+t.userid);var a,o,l;if(m&&(i[s].isOnly="block"==m.style.display?"online":"offline"),this.localStorageService.setItem(S+this.userData.userid,i),this.platform.is("mobile")?(a="",o=!0,l=""):(a="pcandwebdesig ",o=!1,l="messagedetailmodals"),this.modal3&&(this.modal3.dismiss({data:!0}),this.modal3=null),this.modal2&&(this.modal2.dismiss({data:!0}),this.modal2=null),this.modal&&(this.activeitems=0,this.modal.dismiss({data:!0}),this.modal=null),this.activeitems=t.userid,"pwa"==this.userData.logintype)var u="pwa";else u="mobile";return this.connection.send({token:this.userData.userid,g_type:"open_message_look",local:u,indata:i[s]}),this.modal=yield this.modalCtrl.create({component:te.PX,componentProps:{items:i[s],userid:t.userid,connection:this.connection},mode:"ios",cssClass:a,id:l,swipeToClose:!1,showBackdrop:o,backdropDismiss:o}),this.modal.onDidDismiss().then(d=>{if(this.activeitems=0,t){t.messageLook=!1,this.localStorageService.getItem("cacheitem")&&(t.message=this.localStorageService.getItem("cacheitem"));let r=document.getElementById("messagecontes"+t.userid);r&&this.localStorageService.getItem("cacheitem")&&(r.innerText=this.localStorageService.getItem("cacheitem"));let c=document.getElementById("messageLooks"+t.userid);c&&(c.style.display="none"),this.localStorageService.removeItem("cacheitem"),setTimeout(()=>{this.localStorageService.removeItem("cacheitem"),this.localStorageService.removeItem(k+this.userData.userid+t.userid)},300),this.localStorageService.removeItem(k+this.userData.userid+t.userid),t=""}this.messageData||this.forceReloadData("chats")}),yield setTimeout(()=>{this.activeitems=t.userid},600),yield this.modal.present()}})}deletechats(t){return(0,D.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.generalFunctions.xtranslate("general.logoutinfo"),message:this.generalFunctions.xtranslate("messenger.deletechatsin"),buttons:[{text:this.generalFunctions.xtranslate("general.cancel"),role:"cancel",cssClass:"secondary",handler:s=>{}},{text:this.generalFunctions.xtranslate("general.okay"),handler:()=>{var s=this.localStorageService.getItem(S+this.userData.userid),a=s.findIndex(l=>l.userid==t.userid);s[a]&&(s[a].message="",s[a].messageLook=!1,this.localStorageService.setItem(S+this.userData.userid,s)),this.localStorageService.removeItem(y+t.userid);let o=this.messageData.indexOf(t);o>-1&&this.messageData.splice(o,1)}}]})).present()})}doRefresh(t){this.dataInit(),setTimeout(()=>{t.target.complete()},1e3)}dataInit(){return(0,D.mG)(this,void 0,void 0,function*(){this.localStorageService.getItem(Q+this.userData.userid)||this.localStorageService.setItem(Q+this.userData.userid,[]),this.localStorageService.getItem(S+this.userData.userid)||this.localStorageService.setItem(S+this.userData.userid,[]),this.changeTabs("chats")})}changeTabs(t){if("chats"==t&&!this.messageData.length){this.messageData=[];var i=this.localStorageService.getItem(S+this.userData.userid);let a="date";i.sort((o,l)=>(l[a]||"").toString().localeCompare((o[a]||"").toString())),this.messageData=i}if("people"==t&&!this.peopleData.length){this.peopleData=[];var s=this.localStorageService.getItem(S+this.userData.userid);let a="fullName";s.sort((o,l)=>(o[a]||"").toString().localeCompare((l[a]||"").toString())),this.peopleData=s}}forceReloadData(t){if("chats"==t){this.messageData=[];var i=this.localStorageService.getItem(S+this.userData.userid);this.messageData=i}if("people"==t){this.peopleData=[];var s=this.localStorageService.getItem(S+this.userData.userid);let a="fullName";s.sort((o,l)=>(o[a]||"").toString().localeCompare((l[a]||"").toString())),this.peopleData=s}}ionViewDidEnter(){this.viewActive=!0}ionViewDidLeave(){this.viewActive=!1}loadDocuments(){return(0,D.mG)(this,void 0,void 0,function*(){const t=yield I.fy.readdir({directory:E,path:Z+"/"+U});console.log(t),this.folderContent=t.files.map(i=>({name:i,isFile:i.includes(".")})),console.log(this.folderContent)})}createDir(t){return(0,D.mG)(this,void 0,void 0,function*(){try{let i=yield I.fy.mkdir({directory:E,path:t,recursive:!0});console.log("folder ",i)}catch(i){}})}writeSecretFilePhoto(t,i){return(0,D.mG)(this,void 0,void 0,function*(){yield I.fy.writeFile({path:Z+"/"+F+"/"+t,data:i,directory:E,encoding:I.ez.UTF8})})}readSecretFilePhoto(t){return(0,D.mG)(this,void 0,void 0,function*(){try{let i=yield I.fy.readFile({path:Z+"/"+F+"/"+t.photo,directory:E,encoding:I.ez.UTF8});t.dresult=i.data}catch(i){console.log("Unable to make directory",i),t.notavibled=!0}})}readSecretFilePhotoPwa(t){return(0,D.mG)(this,void 0,void 0,function*(){try{return(yield I.fy.readFile({path:Z+"/"+F+"/"+t,directory:E,encoding:I.ez.UTF8})).data}catch(i){return!1}})}readSecretFileAudioPwa(t){return(0,D.mG)(this,void 0,void 0,function*(){try{return(yield I.fy.readFile({path:Z+"/"+U+"/"+t,directory:E,encoding:I.ez.UTF8})).data}catch(i){return!1}})}writeSecretFileAudio(t,i){return(0,D.mG)(this,void 0,void 0,function*(){yield I.fy.writeFile({path:Z+"/"+U+"/"+t,data:i,directory:E,encoding:I.ez.UTF8})})}readSecretFileAudio(t){return(0,D.mG)(this,void 0,void 0,function*(){try{let i=yield I.fy.readFile({path:Z+"/"+U+"/"+t.audio,directory:E,encoding:I.ez.UTF8});t.dresult=i.data}catch(i){console.log("Unable to make directory",i),t.notavibled=!0}})}retryconn(){return(0,D.mG)(this,void 0,void 0,function*(){this.connection&&(this.serverstatus="connecting",this.serveractivestats=!1,this.isOnline="offline",this.closeSocket(),this.modal&&(this.modal.dismiss({data:!0}),this.modal=null),this.modal2&&(this.modal2.dismiss({data:!0}),this.modal2=null),this.modal3&&(this.modal3.dismiss({data:!0}),this.modal3=null)),setTimeout(()=>{this.connection||this.webRtcConnet()},500)})}backgrounmodes(){return(0,D.mG)(this,void 0,void 0,function*(){var t,i,s;if(!this.modalBackground)return this.platform.is("mobile")?(t="backgrounmode",i=!0,s="backgrounmode"):(t="pcandwebdesig backgrounmode",i=!1,s="backgrounmode"),this.modalBackground=yield this.modalCtrl.create({component:ee.nW,componentProps:{connection:this.connection},mode:"ios",cssClass:t,id:s,swipeToClose:!1,showBackdrop:i,backdropDismiss:i}),this.modalBackground.onDidDismiss().then(a=>{}),yield this.modalBackground.present();this.modalBackground.dismiss({data:!0}),this.modalBackground=null})}ngOnInit(){return(0,D.mG)(this,void 0,void 0,function*(){const t=Array.from(Array(26)).map((s,a)=>a+65);this.alphabet=t.map(s=>String.fromCharCode(s)),this.alphabet.push("?"),yield setTimeout(()=>{this.platform.pause.subscribe(()=>(0,D.mG)(this,void 0,void 0,function*(){this.timeObjectCacLOG=this.realSetTimeNextyx(4)})),this.platform.resume.subscribe(()=>(0,D.mG)(this,void 0,void 0,function*(){this.AppCacheData.realNowSetTime()>=this.timeObjectCacLOG&&(this.vibration.vibrate(300),this.retryconn())}))},1e3),yield this.dataConfig.getConf().then(s=>{this.appversion=s.version,this.socketurl=s.socketurl,this.serverid=s.server_id,this.serverpassword=s.server_password,this.pwamobile_encryption_token=s.pwamobile_encryption_token,this.user_encryption_token=s.user_encryption_token}),yield this.createDir(Z),yield setTimeout(()=>{this.createDir(Z+"/"+U),this.createDir(Z+"/"+F)},100),this.localStorageService.getItem(L)?(this.userData=this.localStorageService.getItem(L)[0],this.userphotos=this.userData.photo,this.uuuserid=this.userData.userid,this.chatDizayn=this.userData.chatDizayn,this.chatDizaynColor=this.userData.chatDizaynColor,this.pwamobilstatus=this.localStorageService.getItem("pwamobilestatus"+this.userData.userid),this.webRtcConnet(),setTimeout(()=>{"mobile"==this.ltypeis&&this.dataInit(),"pwa"==this.ltypeis&&"disabled"==this.localStorageService.getItem("loginsycndisable"+this.userData.userid)&&(this.sendsycn=!0,this.dataInit(),this.localStorageService.setItem("loginsycndisable"+this.userData.userid,"enabled"))},500)):this.generalFunctions.navCtrlNR("/auth/login"),window.addEventListener("beforeunload",()=>{this.appClosedEvenet()})})}encryptionLi(t,i,s){if("encrypting"==s)return((u,h)=>{const f=r=>r.split("").map(c=>c.charCodeAt(0));return h.split("").map(f).map(r=>f(u).reduce((c,g)=>c^g,r)).map(r=>("0"+Number(r).toString(16)).substr(-2)).join("")})(t,btoa(unescape(encodeURIComponent(i))));if("decrypting"==s){const u=((u,h)=>h.match(/.{1,2}/g).map(d=>parseInt(d,16)).map(d=>(d=>d.split("").map(r=>r.charCodeAt(0)))(u).reduce((r,c)=>r^c,d)).map(d=>String.fromCharCode(d)).join(""))(t,i);return decodeURIComponent(escape(window.atob(u)))}}GenerateRandomNumber(t,i){return Math.floor(Math.random()*(i-t+1))+t}GenerateRandomChar(){var t="1234567890AaBbCcDdEeFfGgIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz";return t[this.GenerateRandomNumber(0,t.length-1)]}GenerateSerialNumber(t){var i="";if(null!=t)for(var s=0;s<t.length;s++){var a=t[s];i+="0"==a?this.GenerateRandomChar():a}return i}presentActionSheet(){return(0,D.mG)(this,void 0,void 0,function*(){yield(yield this.actionSheetController.create({header:"Men\xfc",mode:"md",cssClass:"my-custom-class",buttons:[{text:this.generalFunctions.xtranslate("messenger.findpeople"),role:"destructive",icon:"person-add-outline",handler:()=>{console.log("Delete clicked"),this.openFinds()}},{text:this.generalFunctions.xtranslate("messenger.qrlogin"),icon:"qr-code-outline",handler:()=>{this.qrlogin()}},{text:this.generalFunctions.xtranslate("settings_title"),icon:"settings-outline",handler:()=>{this.openSettings()}},{text:this.generalFunctions.xtranslate("general.cancel"),icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]})).present()})}qrlogin(){setTimeout(()=>{this.menu.toggle("camera")},500)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.De),e.Y36(J.n),e.Y36(oe.f),e.Y36(v.IN),e.Y36(v.jP),e.Y36(v.SH),e.Y36(G.F0),e.Y36(G.gz),e.Y36(e.R0b),e.Y36(e.sBO),e.Y36(v.t4),e.Y36(ne.V),e.Y36(re.z),e.Y36(le.w),e.Y36(ce),e.Y36(v.Br),e.Y36(v.BX),e.Y36(v._q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-message"]],hostBindings:function(t,i){1&t&&e.NdJ("resize",function(){return i.connection()},!1,e.Jf7)},decls:34,vars:28,consts:[[1,"newbackgrouds"],[1,"newbackgroudsimg"],["class","pwamobileonlies",4,"ngIf"],["mode","ios",1,"ion-no-border",3,"translucent"],["mode","ios"],["slot","start",3,"click"],["class","avatar-sm ion-margin-start",4,"ngIf"],[4,"ngIf"],["slot","end"],["color","dark",1,"yenimesajbtn",3,"click"],["slot","icon-only","name","menu-outline",2,"margin-right","3px"],["mode","ios",1,"full-width",3,"ngModel","ngModelChange"],["value","chats",3,"click"],["value","people",3,"click"],["type","indeterminate",4,"ngIf"],[3,"fullscreen"],[1,"chat-list"],[3,"display",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["style","\nposition: fixed;\nz-index: 99;\ntop: 0;\nbottom: 0;\nleft: 0;\nright: 0;\nbackground: rgb(143 143 143 / 11%);\n",4,"ngIf"],[1,"pwamobileonlies"],[1,"newlopwsamob"],["name","phone-portrait-outline"],[2,"max-width","650px"],["color","dark","expand","block","type","button",1,"ion-margin-start","ion-margin-end","ion-margin-bottom",3,"click"],["name","sync-outline"],["color","light","type","indeterminate",2,"width","40%","margin","0 auto","margin-top","35px"],["name","wifi-outline"],[1,"avatar-sm","ion-margin-start"],["src","assets/images/avatars/0.jpg",3,"id",4,"ngIf"],[3,"id","src",4,"ngIf"],["name","ellipse",2,"position","absolute","right","-5px","width","15px","height","15px",3,"color"],["src","assets/images/avatars/0.jpg",3,"id"],[3,"id","src"],["name","wifi-outline",2,"width","0px","height","0px"],["type","indeterminate"],["lines","none","detail","false","button","",1,"chat-item",3,"click"],["slot","start",1,"avatar-md","has-status"],[1,"avatar-status"],[1,"online-status","active",2,"display","none",3,"id"],[1,"chat-name",3,"id"],[1,"chat-description"],["class","content-preview",3,"id",4,"ngIf"],["slot","end",1,"online-status","unread",3,"id"],["side","end",2,"padding-bottom","12px"],["color","danger","expandable","",3,"click"],["slot","start","name","trash-outline"],[1,"content-preview",3,"id"],[2,"margin-bottom","12px"],["button","","class","chat-item","lines","none","detail","false",3,"class","display","click",4,"ngIf"],["button","","lines","none","detail","false",1,"chat-item",3,"click"],["slot","end",1,"online-status","unread"],[2,"position","fixed","z-index","99","top","0","bottom","0","left","0","right","0","background","rgb(143 143 143 / 11%)"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.qZA(),e.YNc(2,ue,13,9,"div",2),e.YNc(3,he,8,3,"div",2),e.YNc(4,me,11,6,"div",2),e.TgZ(5,"ion-header",3),e.TgZ(6,"ion-toolbar",4),e.TgZ(7,"ion-buttons",5),e.NdJ("click",function(){return i.openSettings()}),e.YNc(8,fe,4,3,"ion-avatar",6),e.qZA(),e.YNc(9,_e,3,3,"ion-title",7),e.YNc(10,ve,4,3,"ion-title",7),e.YNc(11,Se,4,3,"ion-title",7),e.TgZ(12,"ion-buttons",8),e.TgZ(13,"ion-button",9),e.NdJ("click",function(){return i.presentActionSheet()}),e._UZ(14,"ion-icon",10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"ion-toolbar",4),e.TgZ(16,"ion-segment",11),e.NdJ("ngModelChange",function(a){return i.segmentView=a}),e.TgZ(17,"ion-segment-button",12),e.NdJ("click",function(){return i.changeTabs("chats")}),e.TgZ(18,"ion-label"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.TgZ(21,"ion-segment-button",13),e.NdJ("click",function(){return i.changeTabs("people")}),e.TgZ(22,"ion-label"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(25,ye,1,0,"ion-progress-bar",14),e.qZA(),e.TgZ(26,"ion-content",15),e.TgZ(27,"div",16),e.TgZ(28,"ion-list"),e.YNc(29,Ie,19,16,"ion-item-sliding",17),e.qZA(),e.qZA(),e.TgZ(30,"div",16),e.TgZ(31,"ion-list"),e.YNc(32,Ae,5,2,"ion-item-group",18),e.qZA(),e.qZA(),e.qZA(),e.YNc(33,Ze,1,0,"div",19)),2&t&&(e.Udp("background-color",i.chatDizaynColor.color),e.xp6(1),e.Udp("background-image","url("+i.chatDizayn.image+")"),e.xp6(1),e.Q6J("ngIf",i.pwamobilstatus),e.xp6(1),e.Q6J("ngIf","pwa"==i.ltypeis&&!i.sendsycn&&!i.pwamobilstatus),e.xp6(1),e.Q6J("ngIf","connect"==i.serverstatus&&"offline"==i.isOnline),e.xp6(1),e.Q6J("translucent",!0),e.xp6(3),e.Q6J("ngIf",i.userphotos),e.xp6(1),e.Q6J("ngIf","connect"==i.serverstatus),e.xp6(1),e.Q6J("ngIf","connecting"==i.serverstatus),e.xp6(1),e.Q6J("ngIf","connecterror"==i.serverstatus),e.xp6(5),e.Q6J("ngModel",i.segmentView),e.xp6(3),e.Oqu(e.lcZ(20,24,"messenger.chats")),e.xp6(4),e.Oqu(e.lcZ(24,26,"messenger.people")),e.xp6(2),e.Q6J("ngIf","connecting"==i.serverstatus),e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(1),e.Udp("transform","chats"==i.segmentView?"none":"translate3d(-800px, -800px, -800px)"),e.xp6(2),e.Q6J("ngForOf",i.messageData),e.xp6(1),e.Udp("transform","people"==i.segmentView?"none":"translate3d(-800px, -800px, -800px)"),e.xp6(2),e.Q6J("ngForOf",i.alphabet),e.xp6(1),e.Q6J("ngIf","connecting"==i.serverstatus))},directives:[z.O5,v.Gu,v.sr,v.Sm,v.YG,v.gu,v.cJ,v.QI,q.JJ,q.On,v.GO,v.Q$,v.W2,v.q_,z.sg,v.X7,v.BJ,v.wd,v.td,v.Ie,v.IK,v.u8,v.Ub,v.rH],pipes:[de.X$],styles:[".ion-page[_nghost-%COMP%]{background-color:var(--ion-item-background);--ion-background-color: var(--ion-item-background)}.message-icon-middle[_ngcontent-%COMP%]{vertical-align:middle}.chat-item[_ngcontent-%COMP%]{margin-bottom:12px}.chat-item[_ngcontent-%COMP%]   .chat-description[_ngcontent-%COMP%]{font-size:14px;display:flex}.chat-item[_ngcontent-%COMP%]   .content-preview[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.chat-item[_ngcontent-%COMP%]   .time-ago[_ngcontent-%COMP%]{margin-left:4px}.chat-item[_ngcontent-%COMP%]   .online-status.unread[_ngcontent-%COMP%]{display:none}.chat-item.unread[_ngcontent-%COMP%]   .chat-name[_ngcontent-%COMP%]{font-weight:700}.chat-item.unread[_ngcontent-%COMP%]   .chat-description[_ngcontent-%COMP%]{color:var(--ion-color-dark);font-weight:700}.chat-item.unread[_ngcontent-%COMP%]   .online-status.unread[_ngcontent-%COMP%]{display:block}.avatar-stacked[_ngcontent-%COMP%]{position:relative}.avatar-stacked[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:40px;height:40px}.avatar-stacked[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(2){z-index:1;top:14px;right:14px;width:46px;height:46px;border:3px solid #fff}ion-toolbar.sc-ion-searchbar-ios-h[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]   .sc-ion-searchbar-ios-h[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:18px;height:55px}ion-avatar.has-status[_ngcontent-%COMP%]{position:relative}ion-avatar.avatar-sm[_ngcontent-%COMP%]{width:33px;height:33px;margin-inline-start:var(--ion-margin, 10px)}ion-avatar.avatar-md[_ngcontent-%COMP%]{width:56px;height:56px}ion-avatar.avatar-lg[_ngcontent-%COMP%]{display:inline-block;width:88px;height:88px}ion-avatar[_ngcontent-%COMP%]   .avatar-status[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0}ion-avatar[_ngcontent-%COMP%]   .online-status[_ngcontent-%COMP%]{width:16px;height:16px;border:3px solid #fff}.online-status[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;width:10px;height:10px;border-radius:50%;background-color:var(--ion-color-medium)}.online-status.active[_ngcontent-%COMP%]{background-color:var(--ion-color-success)}.online-status.unread[_ngcontent-%COMP%]{background-color:var(--ion-color-secondary)}.list-header-custom[_ngcontent-%COMP%]{text-transform:uppercase;font-size:12px;letter-spacing:1px;color:var(--ion-color-medium)}ion-item[_ngcontent-%COMP%]{--border-color: var(--ion-color-light)}ion-segment.full-width[_ngcontent-%COMP%]{width:100%;margin:0 8px}.chat-list[_ngcontent-%COMP%]{transform:translate3d(-800px,-800px,-800px);height:0px}.pwamobileonlies[_ngcontent-%COMP%]{position:fixed;z-index:10000000000000002000;width:100%;height:100%;background:rgba(0,0,0,.44);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.pwamobileonlies[_ngcontent-%COMP%]   .newlopwsamob[_ngcontent-%COMP%]{position:fixed;text-align:center;left:0;right:0;margin:0 auto;top:50%;transform:translateY(-50%);z-index:99999}.pwamobileonlies[_ngcontent-%COMP%]   .newlopwsamob[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:84px;height:84px;color:#fff}.pwamobileonlies[_ngcontent-%COMP%]   .newlopwsamob[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:20px;max-width:322px;margin:22px auto 0}.pwamobileonlies[_ngcontent-%COMP%]   .newlopwsamob[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{max-width:200px;margin:30px auto 0}"]}),n})()}];let Oe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[G.Bz.forChild(Pe)],G.Bz]}),n})();var Ee=_(4466);let Ne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[z.ez,Oe,Ee.m]]}),n})()}}]);